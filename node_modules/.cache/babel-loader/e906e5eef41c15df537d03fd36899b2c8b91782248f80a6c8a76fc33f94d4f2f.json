{"ast":null,"code":"// src/components/Chat.jsx\nimport React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){let{chat,onSend,status,showMicOptions,setShowMicOptions,voiceInput,setVoiceInput,voiceOutput,setVoiceOutput,onToggleSidebar,onStop,canStop}=_ref;const[input,setInput]=useState('');const handleSend=()=>{if(input.trim()){onSend(input.trim());setInput('');}};const handleRegenerate=async userPrompt=>{const chatId=chat._id;const res=await fetch(\"http://localhost:3000/chat/regenerate\",{method:\"POST\",headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({chatId,userPrompt})});const data=await res.json();const newBotMsg={type:'bot',text:data.reply};const updatedMessages=[...chat.messages,newBotMsg];chat.messages=updatedMessages;window.dispatchEvent(new Event('chat-update'));};return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-toggle\",onClick:onToggleSidebar,children:\"\\u2630\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-container\",children:chat===null||chat===void 0?void 0:chat.messages.map((m,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(m.type),children:[m.text,m.type==='bot'&&i>0&&chat.messages[i-1].type==='user'&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'6px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRegenerate(chat.messages[i-1].text),children:\"\\uD83D\\uDD01 Regenerate\"})})]},i))}),/*#__PURE__*/_jsx(\"div\",{id:\"status\",children:status}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleSend(),placeholder:\"e.g., Perform linear search on [4, 8, 15] to find 15\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMicOptions(true),children:\"\\uD83C\\uDFA4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,children:\"\\u27A4\"}),canStop&&/*#__PURE__*/_jsx(\"button\",{onClick:onStop,children:\"\\u23F9\\uFE0F Stop\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.speechSynthesis.cancel(),children:\"\\u23F9\\uFE0F\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Chat","_ref","chat","onSend","status","showMicOptions","setShowMicOptions","voiceInput","setVoiceInput","voiceOutput","setVoiceOutput","onToggleSidebar","onStop","canStop","input","setInput","handleSend","trim","handleRegenerate","userPrompt","chatId","_id","res","fetch","method","headers","Authorization","concat","localStorage","getItem","body","JSON","stringify","data","json","newBotMsg","type","text","reply","updatedMessages","messages","window","dispatchEvent","Event","className","children","onClick","map","m","i","style","marginTop","id","value","onChange","e","target","onKeyDown","key","placeholder","speechSynthesis","cancel"],"sources":["C:/Users/VENKAT/Downloads/unknown/algoverse/frontend/src/components/Chat.jsx"],"sourcesContent":["// src/components/Chat.jsx\r\nimport React, { useState } from 'react';\r\n\r\nfunction Chat({\r\n  chat, onSend, status,\r\n  showMicOptions, setShowMicOptions,\r\n  voiceInput, setVoiceInput, voiceOutput, setVoiceOutput,\r\n  onToggleSidebar,\r\n  onStop, canStop\r\n}) {\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleSend = () => {\r\n    if (input.trim()) {\r\n      onSend(input.trim());\r\n      setInput('');\r\n    }\r\n  };\r\n\r\n  const handleRegenerate = async (userPrompt) => {\r\n    const chatId = chat._id;\r\n    const res = await fetch(\"http://localhost:3000/chat/regenerate\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify({ chatId, userPrompt })\r\n    });\r\n\r\n    const data = await res.json();\r\n    const newBotMsg = { type: 'bot', text: data.reply };\r\n\r\n    const updatedMessages = [...chat.messages, newBotMsg];\r\n    chat.messages = updatedMessages;\r\n\r\n    window.dispatchEvent(new Event('chat-update'));\r\n  };\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <button className=\"sidebar-toggle\" onClick={onToggleSidebar}>‚ò∞</button>\r\n      <div className=\"chat-container\">\r\n        {chat?.messages.map((m, i) => (\r\n          <div key={i} className={`message ${m.type}`}>\r\n            {m.text}\r\n            {m.type === 'bot' && i > 0 && chat.messages[i - 1].type === 'user' && (\r\n              <div style={{ marginTop: '6px' }}>\r\n                <button onClick={() => handleRegenerate(chat.messages[i - 1].text)}>\r\n                  üîÅ Regenerate\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div id=\"status\">{status}</div>\r\n      <div className=\"chat-input-container\">\r\n        <input\r\n          type=\"text\"\r\n          value={input}\r\n          onChange={e => setInput(e.target.value)}\r\n          onKeyDown={e => e.key === 'Enter' && handleSend()}\r\n          placeholder=\"e.g., Perform linear search on [4, 8, 15] to find 15\"\r\n        />\r\n        <button onClick={() => setShowMicOptions(true)}>üé§</button>\r\n        <button onClick={handleSend}>‚û§</button>\r\n        {canStop && <button onClick={onStop}>‚èπÔ∏è Stop</button>}\r\n        <button onClick={() => window.speechSynthesis.cancel()}>‚èπÔ∏è</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}